@model CustomerViewModel

@{
    ViewData["title"] = "Secure Checkout Page";
}
<style>
.error-message {
        color: red;
        font-size: 0.8em;
}
.cart-header-customer-checkout h2 {
        
        text-align: center;
        margin-bottom: 20px;
}

    /* Row and Card Container */


    /* Button Style */
    
</style>
<form asp-controller="Customer" asp-action="SecureCheckout" method="post" class="customer-checkout-form">
    <div class="row">
        <div class="col-md-8">
            <section>
                <div class="cart-header">
                    <h2>Address</h2>
                </div>
                <div class="row">
                    
                        <a asp-controller="Customer" asp-action="GetCustomerAddressPage" asp-route-username="@Model.ActiveUser.UserName" asp-route-returnurl="checkoutpage" class="btn button-cart add-to-cart btn-primary">Add A new Address</a>
                   
                       <h5>Please select an address from below:</h5>
                        @foreach (var address in Model.addressList)
                        {

                            <div class="col-md-6">
                                <!-- Card -->
                                <div class="card-address-home" onclick="selectAddressCard(this)">
                                    <!-- Card image -->
                                    <!-- Card body -->
                                    <div class="card-body">
                                        <div class="form-group" id="addressCard">
                                            <label for="selectAddress">
                                                <input type="radio" name="selectAddress" value="@address.AddressesId" id="@address.AddressesId" class="card-radio" />
                                                <h5 class="card-title">Name: @address.Name</h5>
                                                <p class="card-text">Apt Number: @address.AptNumber </p>
                                                <p class="card-text">Street Address: @address.StreetAddress</p>
                                                <p class="card-text">City: @address.City</p>
                                                <p class="card-text">Province: @address.Province</p>
                                                <p class="card-text">
                                                    Postal Code: @address.PostalCode
                                                </p>
                                                <p class="card-text">
                                                    Country: @address.Country
                                                </p>
                                                <p class="card-text">
                                                    Phone Number: @address.PhoneNumber
                                                </p>
                                            </label>
                                        </div>


                                    </div>
                                </div>
                            </div>
                        }
                    

                </div>
            </section>
            <section>
                <div class="cart-header">
                    <h2>Payment</h2>
                </div>
                <div class="row">
                    
                        <a asp-controller="Customer" asp-action="GetAddPaymentMethodPage" asp-route-username="@Model.ActiveUser.UserName" asp-route-returnurl="checkoutpage" class="btn button-cart add-to-cart btn-primary">Add a new Payment Method</a>

                    
                        <h5>Please select a payment method from below:</h5>
                        @foreach (var pay in Model.PaymentMethodsList)
                        {

                            <div class="col-md-6">
                                <!-- Card -->
                                <div class="card-payment-home" onclick="selectPaymentCard(this)">
                                    <!-- Card image -->
                                    <!-- Card body -->
                                    <div class="card-body">
                                        <div class="form-group" id="paymentCard">
                                            <label for="selectPayment">
                                                <input type="radio" name="selectPayment" value="@pay.PaymentMethodsId" id="@pay.PaymentMethodsId" class="card-radio" />
                                                <h5 class="card-title">Name on Card: @pay.NameOnCard</h5>
                                                <p class="card-text">Payment Type: @pay.PaymentType </p>
                                                <p class="card-text">Card Number: @pay.CardNumber</p>
                                                <p class="card-text">Card Expiry: @pay.CardExpiry.ToString("MM/yy")</p>
                                                <p class="card-text">CVV: @pay.CardCvv</p>




                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        }
                    
                </div>
            </section>
        </div>
        <div class="col-md-3 order-summary">
            <section>
                <div class="cart-header">
                    <h2>Order Summary</h2>
                </div>
                <div class="cart-container">


                    <div class="row">
                        <h5>Price</h5>

                        <p>
                            Subtotal $@Model.cartList.Sum(x => x.RecipeTotal)
                        </p>


                    </div>



                </div>

            </section>

            <section>
                <div class="row">
                    <div class="col">
                        <button type="submit" class="btn btn-primary btn-place-order">Place Order</button>
                    </div>
                    <div class="col">
                        <a class="btn btn-primary btn-go-to-cart" asp-controller="Customer" asp-action="GetCustomerCart" asp-route-username="@Model.ActiveUser.UserName">Go to Cart</a>
                    </div>
                </div>
            </section>
        </div>
    </div>
</form>

