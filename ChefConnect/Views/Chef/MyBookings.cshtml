@model ChefViewModel
@{
    ViewData["title"] = "My-Bookings";
}
<div class="row">
    <div class="col-md-6">
        <a asp-contorller="Customer" asp-action="GetPastBookings" asp-route-username="@Model.ActiveUser.UserName" class="btn btn-primary">Show Past Bookings</a>
    </div>
    <div class="col-md-6">
        <a asp-contorller="Customer" asp-action="GetUpcomingBookings" asp-route-username="@Model.ActiveUser.UserName" class="btn btn-primary">Show Upcoming Bookings</a>
    </div>
</div>
<div class="row">
    @if (Model.PastOrders.Count > 0)
    {
        <table>
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Customer Phone</th>
                    <th>Order Recipe</th>
                    <th>Order Date</th>
                    <th>Order Timeslot</th>
                    <th>Address</th>
                    <th>Guest Quantity</th>
                    <th>Total</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var booking in Model.PastOrders)
                {
                    <tr>
                        <td>@booking.OrderDetails.Customer.Name</td>
                        <td>@booking.OrderDetails.Customer.PhoneNumber</td>
                        <td>@booking.ChefRecipes.RecipeName</td>
                        <td>@booking.OrderDate.ToString("dd-MM-yyyy")</td>
                        <td>@DateTime.Today.Add(booking.TimeSlot.TimeSlot).ToString("hh:mm tt")</td>
                        <td>
                            <p>
                                Apt/Suite number: @booking.OrderDetails.Address.AptNumber
                            </p>
                            <p>
                                Street Address: @booking.OrderDetails.Address.StreetAddress
                            </p>
                            <p>
                                City: @booking.OrderDetails.Address.City
                            </p>
                            <p>
                                Province: @booking.OrderDetails.Address.Province
                            </p>
                            <p>
                                Country: @booking.OrderDetails.Address.Country
                            </p>
                            <p>
                                Postal Code: @booking.OrderDetails.Address.PostalCode
                            </p>
                        </td>
                        <td>@booking.GuestQuantity</td>
                        <td>@booking.RecipeTotal</td>
                    </tr>
                }
            </tbody>
        </table>
    }
    @if (Model.UpComingOrders.Count > 0)
    {
        <table>
            <thead>
                <tr>
                    <th>Customer Name</th>
                    <th>Customer Phone</th>
                    <th>Order Recipe</th>
                    <th>Order Date</th>
                    <th>Order Timeslot</th>
                    <th>Address</th>
                    <th>Guest Quantity</th>
                    <th>Total</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var booking in Model.UpComingOrders)
                {
                    <tr>
                        <td>@booking.OrderDetails.Customer.Name</td>
                        <td>@booking.OrderDetails.Customer.PhoneNumber</td>
                        <td>@booking.ChefRecipes.RecipeName</td>
                        <td>@booking.OrderDate.ToString("dd-MM-yyyy")</td>
                        <td>@DateTime.Today.Add(booking.TimeSlot.TimeSlot).ToString("hh:mm tt")</td>
                        <td>
                            <p>
                                Apt/Suite number: @booking.OrderDetails.Address.AptNumber
                            </p>
                            <p>
                                Street Address: @booking.OrderDetails.Address.StreetAddress
                            </p>
                            <p>
                                City: @booking.OrderDetails.Address.City
                            </p>
                            <p>
                                Province: @booking.OrderDetails.Address.Province
                            </p>
                            <p>
                                Country: @booking.OrderDetails.Address.Country
                            </p>
                            <p>
                                Postal Code: @booking.OrderDetails.Address.PostalCode
                            </p>
                        </td>
                        <td>@booking.GuestQuantity</td>
                        <td>@booking.RecipeTotal</td>
                        <td>
                            @if (booking.OrderDate > DateTime.Now.AddDays(1))
                            {
                                <a asp-contorller="Customer" asp-action="CancelUpcomingBooking" asp-route-orderid="@booking.OrderDetailsId" asp-route-recipeid="@booking.ChefRecipesId" class="btn btn-danger">Cancel</a>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>

    }
</div>
@*Review Moderation ChatBot*@
<button class="chatbot-toggler">
    <span class="material-symbols-rounded">mode_comment</span>
    <span class="material-symbols-outlined">close</span>
</button>
<div class="chatbot">
    <header>
        <h2>Review Moderation Bot</h2>
        <span class="close-btn material-symbols-outlined">close</span>
    </header>
    <ul class="chatbox">
        <li class="chat incoming">
            <span class="material-symbols-outlined">smart_toy</span>
            <p>Hi there 👋<br>Welcome to Review Moderation Help.</p>
        </li>
    </ul>
    <div class="chat-input">
        <textarea placeholder="Enter a message..." spellcheck="false" required></textarea>
        <span id="send-btn" class="material-symbols-rounded">send</span>
    </div>
</div>

